var should   = require("should");
var assert   = require("assert");

describe("node-flags", function(){

  var args = "node server/start.js --a --b=TRUE --c=true --d=1 --e=FALSE --f=false --g=0 --h=test foo -bar ---foobar | test";
  process.argv = args.split(" ");
  var flags = require("../main");

  it("should parse a as boolean true", function(done){
    if(flags.get("a") === true){
      done();
    }
  });

  it("should parse b as boolean true", function(done){
    if(flags.get("b") === true){
      done();
    }
  });

  it("should parse c as boolean true", function(done){
    if(flags.get("c") === true){
      done();
    }
  });

  it("should parse d as an integer", function(done){
    if(flags.get("d") === 1){
      done();
    }
  });

  it("should parse e as boolean false", function(done){
    if(flags.get("e") === false){
      done();
    }
  });

  it("should parse f as boolean false", function(done){
    if(flags.get("f") === false){
      done();
    }
  });

  it("should parse g as an integer", function(done){
    if(flags.get("g") === 0){
      done();
    }
  });

  it("should parse h as a string", function(done){
    if(flags.get("h") === "test"){
      done();
    }
  });

  it("should parse missing flag as false", function(done){
    if(flags.get("n") === false){
      done();
    }
  });

});
